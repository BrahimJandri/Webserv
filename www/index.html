<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Server Tester</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for Inter */
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">Web Server Method Tester</h1>

        <!-- Base URL Input -->
        <div class="mb-6">
            <label for="baseUrl" class="block text-gray-700 text-sm font-semibold mb-2">Server Base URL:</label>
            <input type="text" id="baseUrl" value="http://localhost:8080"
                   class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <p class="text-xs text-gray-500 mt-1">Example: http://localhost:8080 or https://your-server.com</p>
        </div>

        <!-- GET Method Section -->
        <div class="mb-8 p-6 bg-blue-50 rounded-lg shadow-inner">
            <h2 class="text-2xl font-semibold text-blue-800 mb-4">GET Request</h2>
            <div class="mb-4">
                <label for="getPath" class="block text-blue-700 text-sm font-bold mb-2">Path:</label>
                <input type="text" id="getPath" value="/"
                       class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent">
            </div>
            <button id="getBtn"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                Send GET Request
            </button>
            <div class="mt-4 p-4 bg-blue-100 border border-blue-200 rounded-lg">
                <h3 class="text-blue-700 font-semibold mb-2">GET Response:</h3>
                <pre id="getResponse" class="whitespace-pre-wrap text-sm text-gray-800 break-words"></pre>
            </div>
        </div>

        <!-- POST Method Section -->
        <div class="mb-8 p-6 bg-green-50 rounded-lg shadow-inner">
            <h2 class="text-2xl font-semibold text-green-800 mb-4">POST Request</h2>
            <div class="mb-4">
                <label for="postPath" class="block text-green-700 text-sm font-bold mb-2">Path:</label>
                <input type="text" id="postPath" value="/data"
                       class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent">
            </div>
            <div class="mb-4">
                <label for="postData" class="block text-green-700 text-sm font-bold mb-2">Data (JSON):</label>
                <textarea id="postData" rows="4"
                          class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent"
                          placeholder='{"name": "John Doe", "age": 30}'></textarea>
            </div>
            <button id="postBtn"
                    class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                Send POST Request
            </button>
            <div class="mt-4 p-4 bg-green-100 border border-green-200 rounded-lg">
                <h3 class="text-green-700 font-semibold mb-2">POST Response:</h3>
                <pre id="postResponse" class="whitespace-pre-wrap text-sm text-gray-800 break-words"></pre>
            </div>
        </div>

        <!-- DELETE Method Section -->
        <div class="p-6 bg-red-50 rounded-lg shadow-inner">
            <h2 class="text-2xl font-semibold text-red-800 mb-4">DELETE Request</h2>
            <div class="mb-4">
                <label for="deletePath" class="block text-red-700 text-sm font-bold mb-2">Path to resource:</label>
                <input type="text" id="deletePath" value="/data/123"
                       class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-transparent">
            </div>
            <button id="deleteBtn"
                    class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                Send DELETE Request
            </button>
            <div class="mt-4 p-4 bg-red-100 border border-red-200 rounded-lg">
                <h3 class="text-red-700 font-semibold mb-2">DELETE Response:</h3>
                <pre id="deleteResponse" class="whitespace-pre-wrap text-sm text-gray-800 break-words"></pre>
            </div>
        </div>
    </div>

    <script>
        // Get elements
        const baseUrlInput = document.getElementById('baseUrl');

        const getPathInput = document.getElementById('getPath');
        const getBtn = document.getElementById('getBtn');
        const getResponseDiv = document.getElementById('getResponse');

        const postPathInput = document.getElementById('postPath');
        const postDataTextarea = document.getElementById('postData');
        const postBtn = document.getElementById('postBtn');
        const postResponseDiv = document.getElementById('postResponse');

        const deletePathInput = document.getElementById('deletePath');
        const deleteBtn = document.getElementById('deleteBtn');
        const deleteResponseDiv = document.getElementById('deleteResponse');

        /**
         * Generic function to send an HTTP request and display the response.
         * @param {string} method - The HTTP method (e.g., 'GET', 'POST', 'DELETE').
         * @param {HTMLInputElement|HTMLTextAreaElement} pathInput - The input element containing the path.
         * @param {string} [bodyData] - The request body data (for POST).
         * @param {HTMLElement} responseDiv - The div to display the response.
         */
        async function sendRequest(method, pathInput, bodyData, responseDiv) {
            const baseUrl = baseUrlInput.value.trim();
            const path = pathInput.value.trim();
            const url = `${baseUrl}${path}`;

            responseDiv.textContent = 'Loading...';
            responseDiv.classList.remove('text-red-600'); // Remove error styling if present

            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    },
                };

                if (bodyData) {
                    try {
                        // Attempt to parse bodyData as JSON to ensure it's valid
                        options.body = JSON.stringify(JSON.parse(bodyData));
                    } catch (e) {
                        responseDiv.textContent = 'Error: Invalid JSON in request body.';
                        responseDiv.classList.add('text-red-600');
                        return;
                    }
                }

                const response = await fetch(url, options);
                let responseText;

                // Try to parse as JSON, if that fails, get as text
                try {
                    const json = await response.json();
                    responseText = JSON.stringify(json, null, 2); // Pretty print JSON
                } catch (e) {
                    responseText = await response.text();
                }

                responseDiv.textContent = `Status: ${response.status} ${response.statusText}\n\n${responseText}`;

                if (!response.ok) {
                    responseDiv.classList.add('text-red-600');
                } else {
                    responseDiv.classList.remove('text-red-600');
                }

            } catch (error) {
                responseDiv.textContent = `Error: ${error.message}. Check if your server is running and the URL is correct.`;
                responseDiv.classList.add('text-red-600');
                console.error('Fetch error:', error);
            }
        }

        // Event Listeners
        getBtn.addEventListener('click', () => sendRequest('GET', getPathInput, null, getResponseDiv));
        postBtn.addEventListener('click', () => sendRequest('POST', postPathInput, postDataTextarea.value, postResponseDiv));
        deleteBtn.addEventListener('click', () => sendRequest('DELETE', deletePathInput, null, deleteResponseDiv));
    </script>
</body>
</html>